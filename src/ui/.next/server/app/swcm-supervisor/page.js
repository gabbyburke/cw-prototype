(()=>{var s={};s.id=956,s.ids=[956],s.modules={2934:s=>{"use strict";s.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:s=>{"use strict";s.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:s=>{"use strict";s.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:s=>{"use strict";s.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},327:(s,e,a)=>{"use strict";a.r(e),a.d(e,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>o,routeModule:()=>x,tree:()=>d}),a(1429),a(3045),a(5866);var n=a(3191),r=a(8716),t=a(7922),i=a.n(t),c=a(5231),l={};for(let s in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(s)&&(l[s]=()=>c[s]);a.d(e,l);let d=["",{children:["swcm-supervisor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1429)),"/home/gabbyburke/cw-prototype/src/ui/app/swcm-supervisor/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3045)),"/home/gabbyburke/cw-prototype/src/ui/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/gabbyburke/cw-prototype/src/ui/app/swcm-supervisor/page.tsx"],h="/swcm-supervisor/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/swcm-supervisor/page",pathname:"/swcm-supervisor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8448:(s,e,a)=>{Promise.resolve().then(a.bind(a,6849))},6849:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var n=a(326),r=a(7577),t=a(434),i=a(6824),c=a(4333);function l({case_:s,swcmWorkers:e,onAssign:a,isAssigning:i}){let[c,l]=(0,r.useState)("");return(0,n.jsxs)("div",{className:"action-buttons",children:[(0,n.jsxs)("select",{className:"form-control small",value:c,onChange:s=>l(s.target.value),disabled:i,children:[n.jsx("option",{value:"",children:"Assign to..."}),e.map(s=>n.jsx("option",{value:s.name,children:s.name},s.user_id))]}),(0,n.jsxs)("button",{className:"action-btn small primary",onClick:()=>{c&&(a(s.case_id,c),l(""))},disabled:!c||i,children:[n.jsx("span",{className:"icon",children:i?"hourglass_empty":"assignment"}),i?"Assigning...":"Assign"]}),(0,n.jsxs)(t.default,{href:`/cases/${s.case_id}`,className:"action-btn small secondary",children:[n.jsx("span",{className:"icon",children:"visibility"}),"Review"]})]})}function d(){let[s,e]=(0,r.useState)("assignment"),[a,d]=(0,r.useState)([]),[o,h]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null),[p,u]=(0,r.useState)(new Set),j=c.bs.filter(s=>"caseworker"===s.role),g=async()=>{h(!0),x(null);let s=await (0,i.BY)();s.error?x(s.error):s.data&&d(s.data.cases),h(!1)},N=async(s,e)=>{if(!e)return;u(e=>new Set(e).add(s));let a=await (0,i.xL)(s,e,"Sarah Williams");a.error?x(a.error):d(e=>e.filter(e=>e.case_id!==s)),u(e=>{let a=new Set(e);return a.delete(s),a})};return(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsxs)("div",{className:"page-header",children:[n.jsx("h1",{className:"page-title",children:"SWCM Supervisor Dashboard"}),n.jsx("p",{className:"page-description",children:"Assign cases to SWCM workers and manage team workload"})]}),(0,n.jsxs)("div",{className:"content-wrapper",children:[n.jsx("div",{className:"tabs-container",children:(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsxs)("button",{className:`tab ${"assignment"===s?"active":""}`,onClick:()=>e("assignment"),children:[n.jsx("span",{className:"icon",children:"assignment_ind"}),"Pending Assignment (",a.length,")"]}),(0,n.jsxs)("button",{className:`tab ${"workload"===s?"active":""}`,onClick:()=>e("workload"),children:[n.jsx("span",{className:"icon",children:"analytics"}),"Team Workload"]}),(0,n.jsxs)("button",{className:`tab ${"assigned"===s?"active":""}`,onClick:()=>e("assigned"),children:[n.jsx("span",{className:"icon",children:"check_circle"}),"Assigned Today"]})]})}),(0,n.jsxs)("div",{className:"tab-content",children:["assignment"===s&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"card-header",children:[n.jsx("h2",{children:"Cases Pending SWCM Assignment"}),(0,n.jsxs)("div",{className:"card-actions",children:[(0,n.jsxs)("button",{className:"action-btn secondary",children:[n.jsx("span",{className:"icon",children:"filter_list"}),"Filter"]}),(0,n.jsxs)("button",{className:"action-btn primary",children:[n.jsx("span",{className:"icon",children:"refresh"}),"Refresh"]})]})]}),(0,n.jsxs)("div",{className:"card-content",children:[m&&(0,n.jsxs)("div",{className:"error-message",children:[n.jsx("span",{className:"icon",children:"error"}),(0,n.jsxs)("p",{children:["Error loading cases: ",m]}),n.jsx("button",{onClick:g,className:"action-btn primary",children:"Retry"})]}),o?(0,n.jsxs)("div",{className:"loading-state",children:[n.jsx("span",{className:"icon large",children:"hourglass_empty"}),n.jsx("p",{children:"Loading pending cases..."})]}):a.length>0?n.jsx("div",{className:"table-container",children:(0,n.jsxs)("table",{className:"data-table",children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{children:[n.jsx("th",{children:"Case ID"}),n.jsx("th",{children:"Family Name"}),n.jsx("th",{children:"County"}),n.jsx("th",{children:"Risk Level"}),n.jsx("th",{children:"Allegation Type"}),n.jsx("th",{children:"Created Date"}),n.jsx("th",{children:"Days Pending"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:a.map(s=>(0,n.jsxs)("tr",{children:[n.jsx("td",{children:n.jsx(t.default,{href:`/cases/${s.case_id}`,className:"case-link",children:s.case_number||s.case_id})}),n.jsx("td",{children:s.family_name}),n.jsx("td",{children:s.county}),n.jsx("td",{children:n.jsx("span",{className:`risk-badge ${s.risk_level?.toLowerCase()||"medium"}`,children:s.risk_level||"Medium"})}),n.jsx("td",{children:s.allegation_type}),n.jsx("td",{children:new Date(s.created_date).toLocaleDateString()}),n.jsx("td",{children:n.jsx("span",{className:"days-pending",children:Math.floor((Date.now()-new Date(s.created_date).getTime())/864e5)})}),n.jsx("td",{children:n.jsx(l,{case_:s,swcmWorkers:j,onAssign:N,isAssigning:p.has(s.case_id)})})]},s.case_id))})]})}):(0,n.jsxs)("div",{className:"empty-state",children:[n.jsx("span",{className:"icon large",children:"assignment_turned_in"}),n.jsx("h3",{children:"No Cases Pending Assignment"}),n.jsx("p",{children:"All approved cases have been assigned to SWCM workers"})]})]})]}),"workload"===s&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"card-header",children:[n.jsx("h2",{children:"SWCM Team Workload Analysis"}),n.jsx("div",{className:"card-actions",children:(0,n.jsxs)("button",{className:"action-btn secondary",children:[n.jsx("span",{className:"icon",children:"download"}),"Export Report"]})})]}),n.jsx("div",{className:"card-content",children:(0,n.jsxs)("div",{className:"workload-grid",children:[(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[n.jsx("h3",{children:"Olivia Rodriguez"}),n.jsx("span",{className:"worker-role",children:"SWCM"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"15"}),n.jsx("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"3"}),n.jsx("span",{className:"stat-label",children:"High Risk"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"85%"}),n.jsx("span",{className:"stat-label",children:"Capacity"})]})]}),n.jsx("div",{className:"workload-actions",children:n.jsx("button",{className:"action-btn small secondary",children:"View Details"})})]}),(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[n.jsx("h3",{children:"Michael Chen"}),n.jsx("span",{className:"worker-role",children:"SWCM"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"12"}),n.jsx("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"2"}),n.jsx("span",{className:"stat-label",children:"High Risk"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"68%"}),n.jsx("span",{className:"stat-label",children:"Capacity"})]})]}),n.jsx("div",{className:"workload-actions",children:n.jsx("button",{className:"action-btn small secondary",children:"View Details"})})]}),(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[n.jsx("h3",{children:"David Thompson"}),n.jsx("span",{className:"worker-role",children:"SWCM"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"9"}),n.jsx("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"1"}),n.jsx("span",{className:"stat-label",children:"High Risk"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"51%"}),n.jsx("span",{className:"stat-label",children:"Capacity"})]})]}),n.jsx("div",{className:"workload-actions",children:n.jsx("button",{className:"action-btn small secondary",children:"View Details"})})]})]})})]}),"assigned"===s&&(0,n.jsxs)("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h2",{children:"Cases Assigned Today"})}),n.jsx("div",{className:"card-content",children:(0,n.jsxs)("div",{className:"empty-state",children:[n.jsx("span",{className:"icon large",children:"assignment_turned_in"}),n.jsx("h3",{children:"No Cases Assigned Today"}),n.jsx("p",{children:"No cases have been assigned to SWCM workers today"})]})})]})]})]})]})}},6824:(s,e,a)=>{"use strict";a.d(e,{$4:()=>h,BY:()=>i,Kj:()=>m,k4:()=>d,r$:()=>o,tW:()=>l,xL:()=>c});var n=a(902);class r{constructor(s="https://ccwis-node-proxy-807576987550.us-central1.run.app"){this.baseUrl=s}async getAuthHeaders(){try{let s=n.I8.currentUser;if(s){let e=await s.getIdToken();return{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}}catch(s){console.warn("Failed to get auth token:",s)}return{"Content-Type":"application/json"}}async request(s,e={}){try{let a=`${this.baseUrl}${s}`,n=await this.getAuthHeaders(),r=await fetch(a,{headers:{...n,...e.headers},...e});if(!r.ok)return{error:(await r.json().catch(()=>({}))).error||`HTTP ${r.status}: ${r.statusText}`};return{data:await r.json()}}catch(s){return{error:s instanceof Error?s.message:"Unknown error occurred"}}}async getCasesPendingAssignment(){return this.request("/swcm/cases/pending-assignment")}async assignCaseToSWCM(s,e,a){return this.request(`/swcm/cases/${s}/assign`,{method:"POST",body:JSON.stringify({assigned_worker:e,assigned_supervisor:a})})}async getCasesByWorker(s){return this.request(`/cases?assigned_worker=${encodeURIComponent(s)}`)}async getCaseById(s){return this.request(`/cases/${s}`)}async getPersonsByCase(s){return this.request(`/cases/${s}/persons`)}async getCaseNotes(s){return this.request(`/cases/${s}/notes`)}async addCaseNote(s,e,a){return this.request(`/cases/${s}/notes`,{method:"POST",body:JSON.stringify({note_text:e,note_type:a||"General"})})}async updateCase(s,e){return this.request(`/cases/${s}`,{method:"PUT",body:JSON.stringify(e)})}async searchPersons(s){return this.request(`/persons/search?q=${encodeURIComponent(s)}`)}async healthCheck(){return this.request("/health")}}let t=new r,i=()=>t.getCasesPendingAssignment(),c=(s,e,a)=>t.assignCaseToSWCM(s,e,a),l=s=>t.getCasesByWorker(s),d=s=>t.getCaseById(s),o=(s,e,a)=>t.addCaseNote(s,e,a),h=(s,e)=>t.updateCase(s,e),m=s=>t.searchPersons(s)},1429:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});let n=(0,a(8570).createProxy)(String.raw`/home/gabbyburke/cw-prototype/src/ui/app/swcm-supervisor/page.tsx#default`)}};var e=require("../../webpack-runtime.js");e.C(s);var a=s=>e(e.s=s),n=e.X(0,[709,240],()=>a(327));module.exports=n})();