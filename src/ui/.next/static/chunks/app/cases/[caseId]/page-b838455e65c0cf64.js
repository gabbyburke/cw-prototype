(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{2598:function(e,s,a){Promise.resolve().then(a.bind(a,649))},649:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return l}});var n=a(7437),t=a(2265),i=a(7648),r=a(5475),c=a(9116);function l(){let e=(0,r.useParams)().caseId,[s,a]=(0,t.useState)(null),[l,o]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),[m,p]=(0,t.useState)(!0),[u,x]=(0,t.useState)(null),[j,v]=(0,t.useState)("overview");(0,t.useEffect)(()=>{e&&g()},[e]);let g=async()=>{p(!0),x(null);try{let s=await (0,c.k4)(e);s.error?x(s.error):s.data?(a(s.data),o(s.data.persons||[]),h(s.data.timeline_events||[])):x("Case not found")}catch(e){x("Failed to load case data")}p(!1)},N=e=>{switch(e){case"case_note":return"note";case"visit":return"home";case"court_hearing":return"gavel";case"placement_change":return"swap_horiz";case"assessment":return"assignment";case"document_upload":return"upload_file";case"assignment_change":return"person_add";default:return"event"}},y=e=>{switch(e){case"high":return"error";case"medium":return"secondary";default:return"primary"}};return m?(0,n.jsx)("div",{className:"page-container",children:(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"Loading Case Details..."}),(0,n.jsx)("p",{className:"page-description",children:"Please wait while we load the case information."})]})}):u?(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"Error Loading Case"}),(0,n.jsx)("p",{className:"page-description",children:u})]}),(0,n.jsxs)("div",{className:"content-wrapper",children:[(0,n.jsxs)("div",{className:"error-message",children:[(0,n.jsx)("span",{className:"icon",children:"error"}),(0,n.jsx)("p",{children:"Unable to load case details. Please try again or contact support if the problem persists."})]}),(0,n.jsxs)(i.default,{href:"/",className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"arrow_back"}),"Back to Dashboard"]})]})]}):s?(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"var(--unit-4)"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"page-title",children:s.case_display_name||s.family_name}),(0,n.jsxs)("p",{className:"page-description",style:{fontSize:"1.1rem",marginBottom:"var(--unit-2)"},children:[s.case_number," â€¢ Primary Child: ",s.primary_child]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"var(--unit-2)",marginBottom:"var(--unit-2)"},children:[(0,n.jsxs)("span",{className:"badge ".concat((e=>{switch(e.toLowerCase()){case"high":return"error";case"medium":default:return"secondary";case"low":return"tertiary"}})(s.priority_level)),children:[s.priority_level," Priority"]}),(0,n.jsx)("span",{className:"badge ".concat((e=>{switch(e.toLowerCase()){case"active":return"primary";case"pending assignment":default:return"secondary";case"closed":case"draft":return"tertiary"}})(s.status)),children:s.status})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"var(--unit-2)"},children:[(0,n.jsxs)(i.default,{href:"/",className:"action-btn secondary",children:[(0,n.jsx)("span",{className:"icon",children:"arrow_back"}),"Back to Dashboard"]}),(0,n.jsxs)("button",{className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"edit"}),"Edit Case"]})]})]}),(0,n.jsxs)("div",{className:"case-summary",children:[(0,n.jsxs)("div",{className:"summary-item",children:[(0,n.jsx)("span",{className:"icon",children:"report"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Allegation:"}),(0,n.jsx)("p",{children:s.allegation_type})]})]}),(0,n.jsxs)("div",{className:"summary-item",children:[(0,n.jsx)("span",{className:"icon",children:"person"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Assigned Worker:"}),(0,n.jsx)("p",{children:s.assigned_worker||"Unassigned"})]})]}),(0,n.jsxs)("div",{className:"summary-item",children:[(0,n.jsx)("span",{className:"icon",children:"schedule"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Created:"}),(0,n.jsx)("p",{children:new Date(s.created_date).toLocaleDateString()})]})]}),(0,n.jsxs)("div",{className:"summary-item",children:[(0,n.jsx)("span",{className:"icon",children:"location_on"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"County:"}),(0,n.jsx)("p",{children:s.county})]})]})]})]}),(0,n.jsxs)("div",{className:"tab-navigation",style:{marginBottom:"var(--unit-6)"},children:[(0,n.jsxs)("button",{className:"overview"===j?"active":"",onClick:()=>v("overview"),children:[(0,n.jsx)("span",{className:"icon",children:"dashboard"}),"Overview"]}),(0,n.jsxs)("button",{className:"timeline"===j?"active":"",onClick:()=>v("timeline"),children:[(0,n.jsx)("span",{className:"icon",children:"timeline"}),"Timeline (",d.length,")"]}),(0,n.jsxs)("button",{className:"persons"===j?"active":"",onClick:()=>v("persons"),children:[(0,n.jsx)("span",{className:"icon",children:"people"}),"People (",l.length,")"]}),(0,n.jsxs)("button",{className:"documents"===j?"active":"",onClick:()=>v("documents"),children:[(0,n.jsx)("span",{className:"icon",children:"folder"}),"Documents"]})]}),"overview"===j&&(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsxs)("div",{className:"overview-grid",children:[(0,n.jsxs)("article",{className:"overview-section",children:[(0,n.jsx)("h3",{children:"Case Information"}),(0,n.jsxs)("div",{className:"detail-list",children:[(0,n.jsxs)("div",{className:"detail-item",children:[(0,n.jsx)("strong",{children:"Allegation Description:"}),(0,n.jsx)("p",{children:s.allegation_description})]}),(0,n.jsxs)("div",{className:"detail-item",children:[(0,n.jsx)("strong",{children:"Status:"}),(0,n.jsx)("p",{children:s.status})]}),(0,n.jsxs)("div",{className:"detail-item",children:[(0,n.jsx)("strong",{children:"Priority Level:"}),(0,n.jsx)("p",{children:s.priority_level})]}),(0,n.jsxs)("div",{className:"detail-item",children:[(0,n.jsx)("strong",{children:"Last Updated:"}),(0,n.jsx)("p",{children:new Date(s.last_updated).toLocaleDateString()})]}),(0,n.jsxs)("div",{className:"detail-item",children:[(0,n.jsx)("strong",{children:"Risk Level:"}),(0,n.jsx)("p",{children:s.risk_level||"Not assessed"})]})]})]}),(0,n.jsxs)("article",{className:"overview-section",children:[(0,n.jsx)("h3",{children:"Recent Activity"}),(0,n.jsxs)("div",{className:"activity-list",children:[d.slice(0,3).map(e=>(0,n.jsxs)("div",{className:"activity-item",children:[(0,n.jsx)("div",{className:"activity-icon ".concat(y(e.priority)),children:(0,n.jsx)("span",{className:"icon",children:N(e.event_type)})}),(0,n.jsxs)("div",{className:"activity-content",children:[(0,n.jsx)("h4",{children:e.title}),(0,n.jsx)("p",{children:e.description}),(0,n.jsxs)("span",{className:"activity-date",children:[new Date(e.date).toLocaleDateString()," - ",e.created_by]})]})]},e.event_id)),0===d.length&&(0,n.jsx)("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"var(--unit-4)"},children:"No recent activity"})]})]}),(0,n.jsxs)("article",{className:"overview-section",children:[(0,n.jsx)("h3",{children:"Recent Case Notes"}),(0,n.jsxs)("div",{className:"notes-list",children:[s.case_notes&&s.case_notes.slice(0,3).map(e=>(0,n.jsxs)("div",{className:"note-item",children:[(0,n.jsxs)("div",{className:"note-header",children:[(0,n.jsx)("strong",{children:e.created_by}),(0,n.jsx)("span",{className:"note-date",children:new Date(e.created_date).toLocaleDateString()})]}),(0,n.jsx)("p",{children:e.text})]},e.note_id)),(!s.case_notes||0===s.case_notes.length)&&(0,n.jsx)("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"var(--unit-4)"},children:"No case notes yet"})]}),(0,n.jsxs)("button",{className:"action-btn secondary",style:{marginTop:"var(--unit-4)"},children:[(0,n.jsx)("span",{className:"icon",children:"note_add"}),"Add Case Note"]})]})]})}),"timeline"===j&&(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsxs)("article",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--unit-4)"},children:[(0,n.jsx)("h3",{children:"Case Timeline"}),(0,n.jsxs)("button",{className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"add"}),"Add Event"]})]}),(0,n.jsxs)("div",{className:"timeline",children:[d.map(e=>(0,n.jsxs)("div",{className:"timeline-item",children:[(0,n.jsx)("div",{className:"timeline-marker ".concat(y(e.priority)),children:(0,n.jsx)("span",{className:"icon",children:N(e.event_type)})}),(0,n.jsxs)("div",{className:"timeline-content",children:[(0,n.jsxs)("div",{className:"timeline-header",children:[(0,n.jsx)("h4",{children:e.title}),(0,n.jsxs)("span",{className:"timeline-date",children:[new Date(e.date).toLocaleDateString()," at ",new Date(e.date).toLocaleTimeString()]})]}),(0,n.jsx)("p",{children:e.description}),(0,n.jsxs)("div",{className:"timeline-meta",children:[(0,n.jsxs)("span",{className:"timeline-author",children:["By: ",e.created_by]}),(0,n.jsx)("span",{className:"timeline-type ".concat(e.event_type),children:e.event_type.replace("_"," ").toUpperCase()})]})]})]},e.event_id)),0===d.length&&(0,n.jsxs)("div",{style:{textAlign:"center",padding:"var(--unit-8)",color:"var(--text-secondary)"},children:[(0,n.jsx)("span",{className:"icon",style:{fontSize:"3rem",marginBottom:"var(--unit-4)"},children:"timeline"}),(0,n.jsx)("p",{children:"No timeline events yet"})]})]})]})}),"persons"===j&&(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsxs)("article",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--unit-4)"},children:[(0,n.jsx)("h3",{children:"People Involved"}),(0,n.jsxs)("button",{className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"person_add"}),"Add Person"]})]}),(0,n.jsxs)("div",{className:"persons-grid",children:[l.map(e=>(0,n.jsxs)("div",{className:"person-card",children:[(0,n.jsxs)("div",{className:"person-header",children:[(0,n.jsxs)("div",{className:"person-info",children:[(0,n.jsxs)("h4",{children:[e.first_name," ",e.last_name]}),(0,n.jsx)("p",{className:"person-role",children:e.role.charAt(0).toUpperCase()+e.role.slice(1)}),(0,n.jsxs)("p",{className:"person-age",children:["Age: ",Math.floor((new Date().getTime()-new Date(e.date_of_birth).getTime())/315576e5)]})]}),e.indicators&&e.indicators.length>0&&(0,n.jsx)("div",{className:"person-indicators",children:e.indicators.map((e,s)=>(0,n.jsx)("span",{className:"indicator-badge",children:e},s))})]}),(0,n.jsxs)("div",{className:"person-contact",children:[e.contact_info.phone&&(0,n.jsxs)("div",{className:"contact-item",children:[(0,n.jsx)("span",{className:"icon",children:"phone"}),(0,n.jsx)("span",{children:e.contact_info.phone})]}),e.contact_info.address&&(0,n.jsxs)("div",{className:"contact-item",children:[(0,n.jsx)("span",{className:"icon",children:"location_on"}),(0,n.jsx)("span",{children:e.contact_info.address})]})]}),(0,n.jsxs)("div",{className:"person-actions",children:[(0,n.jsxs)("button",{className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"visibility"}),"View Profile"]}),(0,n.jsxs)("button",{className:"action-btn secondary",children:[(0,n.jsx)("span",{className:"icon",children:"edit"}),"Edit"]})]})]},e.person_id)),0===l.length&&(0,n.jsxs)("div",{style:{textAlign:"center",padding:"var(--unit-8)",color:"var(--text-secondary)",gridColumn:"1 / -1"},children:[(0,n.jsx)("span",{className:"icon",style:{fontSize:"3rem",marginBottom:"var(--unit-4)"},children:"people"}),(0,n.jsx)("p",{children:"No people added to this case yet"})]})]})]})}),"documents"===j&&(0,n.jsx)("div",{className:"tab-content",children:(0,n.jsxs)("article",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--unit-4)"},children:[(0,n.jsx)("h3",{children:"Electronic Case File (ECF)"}),(0,n.jsxs)("button",{className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"upload_file"}),"Upload Document"]})]}),(0,n.jsxs)("div",{style:{textAlign:"center",padding:"var(--unit-8)",color:"var(--text-secondary)"},children:[(0,n.jsx)("span",{className:"icon",style:{fontSize:"3rem",marginBottom:"var(--unit-4)"},children:"folder_open"}),(0,n.jsx)("p",{children:"Document management feature coming soon"}),(0,n.jsx)("p",{style:{fontSize:"0.9rem",marginTop:"var(--unit-2)"},children:"This will include document upload, categorization, and management capabilities"})]})]})})]}):(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"Case Not Found"}),(0,n.jsx)("p",{className:"page-description",children:"The requested case could not be found."})]}),(0,n.jsx)("div",{className:"content-wrapper",children:(0,n.jsxs)(i.default,{href:"/",className:"action-btn primary",children:[(0,n.jsx)("span",{className:"icon",children:"arrow_back"}),"Back to Dashboard"]})})]})}},9116:function(e,s,a){"use strict";a.d(s,{$4:function(){return h},BY:function(){return r},Kj:function(){return m},k4:function(){return o},r$:function(){return d},tW:function(){return l},xL:function(){return c}});var n=a(7293);class t{async getAuthHeaders(){try{let e=n.I8.currentUser;if(e){let s=await e.getIdToken();return{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}}catch(e){console.warn("Failed to get auth token:",e)}return{"Content-Type":"application/json"}}async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a="".concat(this.baseUrl).concat(e),n=await this.getAuthHeaders(),t=await fetch(a,{headers:{...n,...s.headers},...s});if(!t.ok)return{error:(await t.json().catch(()=>({}))).error||"HTTP ".concat(t.status,": ").concat(t.statusText)};return{data:await t.json()}}catch(e){return{error:e instanceof Error?e.message:"Unknown error occurred"}}}async getCasesPendingAssignment(){return this.request("/swcm/cases/pending-assignment")}async assignCaseToSWCM(e,s,a){return this.request("/swcm/cases/".concat(e,"/assign"),{method:"POST",body:JSON.stringify({assigned_worker:s,assigned_supervisor:a})})}async getCasesByWorker(e){return this.request("/cases?assigned_worker=".concat(encodeURIComponent(e)))}async getCaseById(e){return this.request("/cases/".concat(e))}async getPersonsByCase(e){return this.request("/cases/".concat(e,"/persons"))}async getCaseNotes(e){return this.request("/cases/".concat(e,"/notes"))}async addCaseNote(e,s,a){return this.request("/cases/".concat(e,"/notes"),{method:"POST",body:JSON.stringify({note_text:s,note_type:a||"General"})})}async updateCase(e,s){return this.request("/cases/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async searchPersons(e){return this.request("/persons/search?q=".concat(encodeURIComponent(e)))}async healthCheck(){return this.request("/health")}constructor(e="https://ccwis-node-proxy-807576987550.us-central1.run.app"){this.baseUrl=e}}let i=new t,r=()=>i.getCasesPendingAssignment(),c=(e,s,a)=>i.assignCaseToSWCM(e,s,a),l=e=>i.getCasesByWorker(e),o=e=>i.getCaseById(e),d=(e,s,a)=>i.addCaseNote(e,s,a),h=(e,s)=>i.updateCase(e,s),m=e=>i.searchPersons(e)},7293:function(e,s,a){"use strict";a.d(s,{I8:function(){return r},Vv:function(){return c}});var n=a(738),t=a(2148);let i=(0,n.ZF)({projectId:"cw-vision-prototype",authDomain:"cw-vision-prototype.firebaseapp.com"}),r=(0,t.v0)(i),c=new t.hJ;c.setCustomParameters({hd:"google.com"})},7648:function(e,s,a){"use strict";a.d(s,{default:function(){return t.a}});var n=a(2972),t=a.n(n)}},function(e){e.O(0,[15,972,498,971,117,744],function(){return e(e.s=2598)}),_N_E=e.O()}]);