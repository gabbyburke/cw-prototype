(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{8780:function(e,s,a){Promise.resolve().then(a.bind(a,1661))},1661:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return i}});var n=a(7437),r=a(2265),t=a(7648),c=a(9116);function i(){let[e,s]=(0,r.useState)("pending"),[a,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[o,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{m()},[]);let m=async()=>{d(!0),h(null);let e=await (0,c.tW)("unassigned");e.error?h(e.error):e.data&&i(e.data.cases.filter(e=>"Pending Assignment"===e.status)),d(!1)},u=e=>{switch(e.toLowerCase()){case"allergy":return"medical_services";case"icwa eligible":return"diversity_3";case"runaway":return"directions_run";case"worker safety":return"security";case"protective order":return"gavel";case"icpc":return"swap_horiz";case"safe haven":return"shield";case"chronic medical condition":return"local_hospital";default:return"flag"}},p=e=>{switch(e.toLowerCase()){case"allergy":case"runaway":case"worker safety":return"error";case"icwa eligible":return"tertiary";case"protective order":case"chronic medical condition":return"secondary";default:return"primary"}},j=e=>{if(!e.persons)return null;let s=e.persons.filter(e=>"Client"===e.role);return 0===s.length?null:s.map((e,a)=>(0,n.jsxs)("span",{children:[(0,n.jsxs)(t.default,{href:"/persons/".concat(e.person_id),className:"child-link",children:[e.first_name," ",e.last_name]}),a<s.length-1&&", "]},e.person_id))},x=e=>{let s=new Set;return e.persons&&e.persons.forEach(e=>{e.indicators&&e.indicators.forEach(e=>s.add(e))}),Array.from(s)},_=e=>e.last_updated?Math.floor((Date.now()-new Date(e.last_updated).getTime())/864e5):0;return l?(0,n.jsx)("div",{className:"page-container",children:(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"CPW Supervisor View"}),(0,n.jsx)("p",{className:"page-description",children:"Loading cases..."})]})}):(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"CPW Supervisor View"}),(0,n.jsx)("p",{className:"page-description",children:"Review and approve cases from CPW workers"})]}),(0,n.jsxs)("div",{className:"content-wrapper",children:[(0,n.jsx)("div",{className:"tabs-container",children:(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsxs)("button",{className:"tab ".concat("pending"===e?"active":""),onClick:()=>s("pending"),children:[(0,n.jsx)("span",{className:"icon",children:"pending_actions"}),"Pending Approval (",a.length,")"]}),(0,n.jsxs)("button",{className:"tab ".concat("approved"===e?"active":""),onClick:()=>s("approved"),children:[(0,n.jsx)("span",{className:"icon",children:"check_circle"}),"Approved Today"]}),(0,n.jsxs)("button",{className:"tab ".concat("team"===e?"active":""),onClick:()=>s("team"),children:[(0,n.jsx)("span",{className:"icon",children:"group"}),"Team Workload"]})]})}),(0,n.jsxs)("div",{className:"tab-content",children:["pending"===e&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"card-header",children:[(0,n.jsx)("h2",{children:"Cases Pending CPW Supervisor Approval"}),(0,n.jsxs)("div",{className:"card-actions",children:[(0,n.jsxs)("button",{className:"action-btn secondary",children:[(0,n.jsx)("span",{className:"icon",children:"filter_list"}),"Filter"]}),(0,n.jsxs)("button",{className:"action-btn primary",onClick:m,children:[(0,n.jsx)("span",{className:"icon",children:"refresh"}),"Refresh"]})]})]}),(0,n.jsxs)("div",{className:"card-content",children:[o&&(0,n.jsxs)("div",{className:"error-message",children:[(0,n.jsx)("span",{className:"icon",children:"error"}),o]}),a.length>0?(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)("table",{className:"data-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Case Name"}),(0,n.jsx)("th",{children:"Intake Date"}),(0,n.jsx)("th",{children:"Key Allegations"}),(0,n.jsx)("th",{children:"Children Involved"}),(0,n.jsx)("th",{children:"Risk Level"}),(0,n.jsx)("th",{children:"Indicators"}),(0,n.jsx)("th",{children:"Days Pending"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:a.map(e=>{var s;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"case-name-cell",children:[(0,n.jsx)(t.default,{href:"/cases/".concat(e.case_id),className:"case-link",children:(0,n.jsx)("strong",{children:e.case_display_name||e.family_name})}),(0,n.jsx)("div",{className:"case-number",children:e.case_number})]})}),(0,n.jsx)("td",{children:new Date(e.created_date).toLocaleDateString()}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"allegation-cell",children:[(0,n.jsx)("span",{className:"allegation-type",children:e.allegation_type}),(0,n.jsx)("div",{className:"allegation-desc",children:e.allegation_description})]})}),(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:"children-list",children:j(e)||"No children listed"})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"risk-badge ".concat(null===(s=e.risk_level)||void 0===s?void 0:s.toLowerCase().replace(" ","-")),children:e.risk_level||"Not Set"})}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"indicators-cell",children:[x(e).slice(0,2).map((e,s)=>(0,n.jsxs)("span",{className:"indicator-badge ".concat(p(e)),title:e,children:[(0,n.jsx)("span",{className:"icon",children:u(e)}),e]},s)),x(e).length>2&&(0,n.jsxs)("span",{className:"indicator-more",children:["+",x(e).length-2," more"]})]})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"days-pending",children:_(e)})}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"action-buttons",children:[(0,n.jsxs)("button",{className:"action-btn small success",children:[(0,n.jsx)("span",{className:"icon",children:"check"}),"Approve"]}),(0,n.jsxs)("button",{className:"action-btn small warning",children:[(0,n.jsx)("span",{className:"icon",children:"close"}),"Reject"]}),(0,n.jsxs)(t.default,{href:"/cases/".concat(e.case_id),className:"action-btn small secondary",children:[(0,n.jsx)("span",{className:"icon",children:"visibility"}),"Review"]})]})})]},e.case_id)})})]})}):(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("span",{className:"icon large",children:"check_circle"}),(0,n.jsx)("h3",{children:"No Cases Pending Approval"}),(0,n.jsx)("p",{children:"All cases have been reviewed and approved"})]})]})]}),"approved"===e&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsx)("h2",{children:"Cases Approved Today"})}),(0,n.jsx)("div",{className:"card-content",children:(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("span",{className:"icon large",children:"check_circle"}),(0,n.jsx)("h3",{children:"No Cases Approved Today"}),(0,n.jsx)("p",{children:"No cases have been approved today"})]})})]}),"team"===e&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsx)("h2",{children:"Team Workload Overview"})}),(0,n.jsx)("div",{className:"card-content",children:(0,n.jsxs)("div",{className:"workload-grid",children:[(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[(0,n.jsx)("h3",{children:"Jennifer Smith"}),(0,n.jsx)("span",{className:"worker-role",children:"CPW"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-number",children:"12"}),(0,n.jsx)("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-number",children:"3"}),(0,n.jsx)("span",{className:"stat-label",children:"Pending Review"})]}),(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-number",children:"2"}),(0,n.jsx)("span",{className:"stat-label",children:"Overdue"})]})]})]}),(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[(0,n.jsx)("h3",{children:"Mark Johnson"}),(0,n.jsx)("span",{className:"worker-role",children:"CPW"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-number",children:"8"}),(0,n.jsx)("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-number",children:"1"}),(0,n.jsx)("span",{className:"stat-label",children:"Pending Review"})]}),(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"stat-number",children:"0"}),(0,n.jsx)("span",{className:"stat-label",children:"Overdue"})]})]})]})]})})]})]})]})]})}},9116:function(e,s,a){"use strict";a.d(s,{$4:function(){return o},BY:function(){return t},Ey:function(){return u},Kj:function(){return h},TZ:function(){return m},k4:function(){return l},r$:function(){return d},tW:function(){return i},xL:function(){return c}});class n{async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a="".concat(this.baseUrl).concat(e),n=await fetch(a,{headers:{"Content-Type":"application/json",...s.headers},...s});if(!n.ok)return{error:(await n.json().catch(()=>({}))).error||"HTTP ".concat(n.status,": ").concat(n.statusText)};return{data:await n.json()}}catch(e){return{error:e instanceof Error?e.message:"Unknown error occurred"}}}async getCasesPendingAssignment(){return this.request("/swcm/cases/pending-assignment")}async assignCaseToSWCM(e,s,a){return this.request("/swcm/cases/".concat(e,"/assign"),{method:"POST",body:JSON.stringify({assigned_worker:s,assigned_supervisor:a})})}async getCasesByWorker(e){return this.request("/cases?assigned_worker=".concat(encodeURIComponent(e)))}async getCaseById(e){return this.request("/cases/".concat(e))}async getPersonsByCase(e){return this.request("/cases/".concat(e,"/persons"))}async getCaseNotes(e){return this.request("/cases/".concat(e,"/notes"))}async addCaseNote(e,s,a){return this.request("/cases/".concat(e,"/notes"),{method:"POST",body:JSON.stringify({note_text:s,note_type:a||"General"})})}async updateCase(e,s){return this.request("/cases/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async searchPersons(e){return this.request("/persons/search?q=".concat(encodeURIComponent(e)))}async getPersonById(e){return this.request("/persons/".concat(e))}async healthCheck(){return this.request("/health")}constructor(e="https://ccwis-core-case-mgmt-807576987550.us-central1.run.app"){this.baseUrl=e}}let r=new n,t=()=>r.getCasesPendingAssignment(),c=(e,s,a)=>r.assignCaseToSWCM(e,s,a),i=e=>r.getCasesByWorker(e),l=e=>r.getCaseById(e),d=(e,s,a)=>r.addCaseNote(e,s,a),o=(e,s)=>r.updateCase(e,s),h=e=>r.searchPersons(e),m=e=>r.getPersonById(e),u=async e=>(await new Promise(e=>setTimeout(e,400)),!e||e.length<2)?{data:{incidents:[]},error:void 0}:{data:{incidents:[{incident_number:"INC-2024-001234",child_first_names:"Emma",child_last_names:"Johnson",parent_first_names:"Michael, Sarah",parent_last_names:"Johnson, Johnson",cps_worker:"Dana Wilson",due_date:"2024-09-15",county_of_assessment:"King County",intake_date:"2024-08-15",reported_native_american_heritage:"No",perpetrators:"Michael Johnson",perpetrator_first_name:"Michael",perpetrator_last_name:"Johnson",findings:"Substantiated",allegations:"Physical abuse",victims:"Emma Johnson",victim_first_name:"Emma",victim_last_name:"Johnson",person_id:"12345",role:"Client",gender:"Female",age_calculated:8,prior_workers:"None",current_address:"123 Main St",address_type:"Residential",residence_county:"King County",date_of_birth:"2016-03-12",phone_number:"206-555-0123",phone_type:"Home",address:"123 Main St",city:"Seattle",state:"WA",zip_code:98101,non_custodial_parent:!1,non_custodial_parent_person_id:"",non_custodial_parent_first_name:"",non_custodial_parent_last_name:"",non_custodial_parent_middle_name:"",non_custodial_parent_dob:"",non_custodial_parent_ssn:"",non_custodial_parent_suffix:"",non_custodial_parent_sex:"",non_custodial_parent_race:"",non_custodial_parent_ethnicity:"",legal_custodian:"Sarah Johnson",guardian:"",prior_assessment:"None",type_of_appointment:"",clinic_name:"",appointment_date:""}].filter(s=>s.incident_number.toLowerCase().includes(e.toLowerCase())||s.child_first_names.toLowerCase().includes(e.toLowerCase())||s.child_last_names.toLowerCase().includes(e.toLowerCase())||s.allegations.toLowerCase().includes(e.toLowerCase()))},error:void 0}},7648:function(e,s,a){"use strict";a.d(s,{default:function(){return r.a}});var n=a(2972),r=a.n(n)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8780)}),_N_E=e.O()}]);