(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{8327:function(e,s,n){Promise.resolve().then(n.bind(n,8086))},8086:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return c}});var a=n(7437),t=n(2265),r=n(7648),i=n(9116);function c(e){let{params:s}=e,[n,c]=(0,t.useState)(null),[o,d]=(0,t.useState)(!0),[l,h]=(0,t.useState)(null);(0,t.useEffect)(()=>{u()},[s.personId]);let u=async()=>{d(!0),h(null);let e=await (0,i.TZ)(s.personId);e.error?h(e.error):e.data&&c(e.data),d(!1)},m=e=>{switch(e.toLowerCase()){case"allergy":return"medical_services";case"icwa eligible":return"diversity_3";case"runaway":return"directions_run";case"worker safety":return"security";case"protective order":return"gavel";case"icpc":return"swap_horiz";case"safe haven":return"shield";case"chronic medical condition":return"local_hospital";default:return"flag"}},_=e=>{switch(e.toLowerCase()){case"allergy":case"runaway":case"worker safety":return"error";case"icwa eligible":return"tertiary";case"protective order":case"chronic medical condition":return"secondary";default:return"primary"}};return o?(0,a.jsx)("div",{className:"page-container",children:(0,a.jsx)("div",{className:"page-header",children:(0,a.jsx)("h1",{className:"page-title",children:"Loading Person Profile..."})})}):l?(0,a.jsxs)("div",{className:"page-container",children:[(0,a.jsxs)("div",{className:"page-header",children:[(0,a.jsx)("h1",{className:"page-title",children:"Error Loading Person"}),(0,a.jsx)("p",{className:"page-description",children:l})]}),(0,a.jsx)("div",{className:"content-wrapper",children:(0,a.jsxs)(r.default,{href:"/cpw",className:"action-btn secondary",children:[(0,a.jsx)("span",{className:"icon",children:"arrow_back"}),"Back to CPW Dashboard"]})})]}):n?(0,a.jsxs)("div",{className:"page-container",children:[(0,a.jsx)("div",{className:"page-header",children:(0,a.jsxs)("div",{className:"header-with-back",children:[(0,a.jsx)(r.default,{href:"/cpw",className:"back-btn",children:(0,a.jsx)("span",{className:"icon",children:"arrow_back"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"page-title",children:[n.first_name," ",n.last_name]}),(0,a.jsx)("p",{className:"page-description",children:"Person Profile"})]})]})}),(0,a.jsxs)("div",{className:"content-wrapper",children:[(0,a.jsxs)("div",{className:"overview-grid",children:[(0,a.jsxs)("div",{className:"overview-section",children:[(0,a.jsx)("h3",{children:"Basic Information"}),(0,a.jsxs)("div",{className:"detail-list",children:[(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Full Name"}),(0,a.jsxs)("p",{children:[n.first_name," ",n.last_name]})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Date of Birth"}),(0,a.jsx)("p",{children:new Date(n.date_of_birth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Age"}),(0,a.jsxs)("p",{children:[(e=>{let s=new Date,n=new Date(e),a=s.getFullYear()-n.getFullYear(),t=s.getMonth()-n.getMonth();return(t<0||0===t&&s.getDate()<n.getDate())&&a--,a})(n.date_of_birth)," years old"]})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Role in Case"}),(0,a.jsx)("p",{className:"person-role",children:n.role})]}),n.relationship_to_primary_child&&(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Relationship to Primary Child"}),(0,a.jsx)("p",{children:n.relationship_to_primary_child})]})]})]}),(0,a.jsxs)("div",{className:"overview-section",children:[(0,a.jsx)("h3",{children:"Contact Information"}),(0,a.jsxs)("div",{className:"detail-list",children:[n.contact_info.phone&&(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Phone"}),(0,a.jsx)("p",{children:n.contact_info.phone})]}),n.contact_info.email&&(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Email"}),(0,a.jsx)("p",{children:n.contact_info.email})]}),n.contact_info.address&&(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("strong",{children:"Address"}),(0,a.jsx)("p",{children:n.contact_info.address})]}),!n.contact_info.phone&&!n.contact_info.email&&!n.contact_info.address&&(0,a.jsx)("div",{className:"detail-item",children:(0,a.jsx)("p",{className:"no-data",children:"No contact information available"})})]})]}),n.indicators&&n.indicators.length>0&&(0,a.jsxs)("div",{className:"overview-section",children:[(0,a.jsx)("h3",{children:"Safety & Risk Indicators"}),(0,a.jsx)("div",{className:"indicators-grid",children:n.indicators.map((e,s)=>(0,a.jsxs)("div",{className:"indicator-card ".concat(_(e)),children:[(0,a.jsx)("span",{className:"icon",children:m(e)}),(0,a.jsx)("span",{className:"indicator-text",children:e})]},s))})]})]}),(0,a.jsxs)("div",{className:"person-actions",children:[(0,a.jsxs)("button",{className:"action-btn primary",children:[(0,a.jsx)("span",{className:"icon",children:"edit"}),"Edit Person"]}),(0,a.jsxs)("button",{className:"action-btn secondary",children:[(0,a.jsx)("span",{className:"icon",children:"note_add"}),"Add Note"]}),(0,a.jsxs)("button",{className:"action-btn secondary",children:[(0,a.jsx)("span",{className:"icon",children:"history"}),"View History"]})]})]})]}):(0,a.jsxs)("div",{className:"page-container",children:[(0,a.jsxs)("div",{className:"page-header",children:[(0,a.jsx)("h1",{className:"page-title",children:"Person Not Found"}),(0,a.jsx)("p",{className:"page-description",children:"The requested person could not be found."})]}),(0,a.jsx)("div",{className:"content-wrapper",children:(0,a.jsxs)(r.default,{href:"/cpw",className:"action-btn secondary",children:[(0,a.jsx)("span",{className:"icon",children:"arrow_back"}),"Back to CPW Dashboard"]})})]})}},9116:function(e,s,n){"use strict";n.d(s,{$4:function(){return l},BY:function(){return r},Ey:function(){return m},Kj:function(){return h},TZ:function(){return u},k4:function(){return o},r$:function(){return d},tW:function(){return c},xL:function(){return i}});class a{async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n="".concat(this.baseUrl).concat(e),a=await fetch(n,{headers:{"Content-Type":"application/json",...s.headers},...s});if(!a.ok)return{error:(await a.json().catch(()=>({}))).error||"HTTP ".concat(a.status,": ").concat(a.statusText)};return{data:await a.json()}}catch(e){return{error:e instanceof Error?e.message:"Unknown error occurred"}}}async getCasesPendingAssignment(){return this.request("/swcm/cases/pending-assignment")}async assignCaseToSWCM(e,s,n){return this.request("/swcm/cases/".concat(e,"/assign"),{method:"POST",body:JSON.stringify({assigned_worker:s,assigned_supervisor:n})})}async getCasesByWorker(e){return this.request("/cases?assigned_worker=".concat(encodeURIComponent(e)))}async getCaseById(e){return this.request("/cases/".concat(e))}async getPersonsByCase(e){return this.request("/cases/".concat(e,"/persons"))}async getCaseNotes(e){return this.request("/cases/".concat(e,"/notes"))}async addCaseNote(e,s,n){return this.request("/cases/".concat(e,"/notes"),{method:"POST",body:JSON.stringify({note_text:s,note_type:n||"General"})})}async updateCase(e,s){return this.request("/cases/".concat(e),{method:"PUT",body:JSON.stringify(s)})}async searchPersons(e){return this.request("/persons/search?q=".concat(encodeURIComponent(e)))}async getPersonById(e){return this.request("/persons/".concat(e))}async healthCheck(){return this.request("/health")}constructor(e="https://ccwis-core-case-mgmt-807576987550.us-central1.run.app"){this.baseUrl=e}}let t=new a,r=()=>t.getCasesPendingAssignment(),i=(e,s,n)=>t.assignCaseToSWCM(e,s,n),c=e=>t.getCasesByWorker(e),o=e=>t.getCaseById(e),d=(e,s,n)=>t.addCaseNote(e,s,n),l=(e,s)=>t.updateCase(e,s),h=e=>t.searchPersons(e),u=e=>t.getPersonById(e),m=async e=>(await new Promise(e=>setTimeout(e,400)),!e||e.length<2)?{data:{incidents:[]},error:void 0}:{data:{incidents:[{incident_number:"INC-2024-001234",child_first_names:"Emma",child_last_names:"Johnson",parent_first_names:"Michael, Sarah",parent_last_names:"Johnson, Johnson",cps_worker:"Dana Wilson",due_date:"2024-09-15",county_of_assessment:"King County",intake_date:"2024-08-15",reported_native_american_heritage:"No",perpetrators:"Michael Johnson",perpetrator_first_name:"Michael",perpetrator_last_name:"Johnson",findings:"Substantiated",allegations:"Physical abuse",victims:"Emma Johnson",victim_first_name:"Emma",victim_last_name:"Johnson",person_id:"12345",role:"Client",gender:"Female",age_calculated:8,prior_workers:"None",current_address:"123 Main St",address_type:"Residential",residence_county:"King County",date_of_birth:"2016-03-12",phone_number:"206-555-0123",phone_type:"Home",address:"123 Main St",city:"Seattle",state:"WA",zip_code:98101,non_custodial_parent:!1,non_custodial_parent_person_id:"",non_custodial_parent_first_name:"",non_custodial_parent_last_name:"",non_custodial_parent_middle_name:"",non_custodial_parent_dob:"",non_custodial_parent_ssn:"",non_custodial_parent_suffix:"",non_custodial_parent_sex:"",non_custodial_parent_race:"",non_custodial_parent_ethnicity:"",legal_custodian:"Sarah Johnson",guardian:"",prior_assessment:"None",type_of_appointment:"",clinic_name:"",appointment_date:""}].filter(s=>s.incident_number.toLowerCase().includes(e.toLowerCase())||s.child_first_names.toLowerCase().includes(e.toLowerCase())||s.child_last_names.toLowerCase().includes(e.toLowerCase())||s.allegations.toLowerCase().includes(e.toLowerCase()))},error:void 0}},7648:function(e,s,n){"use strict";n.d(s,{default:function(){return t.a}});var a=n(2972),t=n.n(a)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8327)}),_N_E=e.O()}]);