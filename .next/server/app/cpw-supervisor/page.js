(()=>{var e={};e.id=439,e.ids=[439],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},882:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>o,routeModule:()=>m,tree:()=>d}),a(9368),a(1506),a(5866);var n=a(3191),r=a(8716),t=a(7922),i=a.n(t),c=a(5231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);a.d(s,l);let d=["",{children:["cpw-supervisor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9368)),"/home/gabbyburke/cw-prototype/app/cpw-supervisor/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/home/gabbyburke/cw-prototype/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/home/gabbyburke/cw-prototype/app/cpw-supervisor/page.tsx"],h="/cpw-supervisor/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cpw-supervisor/page",pathname:"/cpw-supervisor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5225:(e,s,a)=>{Promise.resolve().then(a.bind(a,1820))},3194:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},7384:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},1820:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var n=a(326),r=a(7577),t=a(434),i=a(6824);function c(){let[e,s]=(0,r.useState)("pending"),[a,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[o,h]=(0,r.useState)(null),p=async()=>{d(!0),h(null);let e=await (0,i.tW)("unassigned");e.error?h(e.error):e.data&&c(e.data.cases.filter(e=>"Pending Assignment"===e.status)),d(!1)},m=e=>{switch(e.toLowerCase()){case"allergy":return"medical_services";case"icwa eligible":return"diversity_3";case"runaway":return"directions_run";case"worker safety":return"security";case"protective order":return"gavel";case"icpc":return"swap_horiz";case"safe haven":return"shield";case"chronic medical condition":return"local_hospital";default:return"flag"}},u=e=>{switch(e.toLowerCase()){case"allergy":case"runaway":case"worker safety":return"error";case"icwa eligible":return"tertiary";case"protective order":case"chronic medical condition":return"secondary";default:return"primary"}},x=e=>{if(!e.persons)return null;let s=e.persons.filter(e=>"Client"===e.role);return 0===s.length?null:s.map((e,a)=>(0,n.jsxs)("span",{children:[(0,n.jsxs)(t.default,{href:`/persons/${e.person_id}`,className:"child-link",children:[e.first_name," ",e.last_name]}),a<s.length-1&&", "]},e.person_id))},j=e=>{let s=new Set;return e.persons&&e.persons.forEach(e=>{e.indicators&&e.indicators.forEach(e=>s.add(e))}),Array.from(s)},v=e=>e.last_updated?Math.floor((Date.now()-new Date(e.last_updated).getTime())/864e5):0;return l?n.jsx("div",{className:"page-container",children:(0,n.jsxs)("div",{className:"page-header",children:[n.jsx("h1",{className:"page-title",children:"CPW Supervisor View"}),n.jsx("p",{className:"page-description",children:"Loading cases..."})]})}):(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsxs)("div",{className:"page-header",children:[n.jsx("h1",{className:"page-title",children:"CPW Supervisor View"}),n.jsx("p",{className:"page-description",children:"Review and approve cases from CPW workers"})]}),(0,n.jsxs)("div",{className:"content-wrapper",children:[n.jsx("div",{className:"tabs-container",children:(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsxs)("button",{className:`tab ${"pending"===e?"active":""}`,onClick:()=>s("pending"),children:[n.jsx("span",{className:"icon",children:"pending_actions"}),"Pending Approval (",a.length,")"]}),(0,n.jsxs)("button",{className:`tab ${"approved"===e?"active":""}`,onClick:()=>s("approved"),children:[n.jsx("span",{className:"icon",children:"check_circle"}),"Approved Today"]}),(0,n.jsxs)("button",{className:`tab ${"team"===e?"active":""}`,onClick:()=>s("team"),children:[n.jsx("span",{className:"icon",children:"group"}),"Team Workload"]})]})}),(0,n.jsxs)("div",{className:"tab-content",children:["pending"===e&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"card-header",children:[n.jsx("h2",{children:"Cases Pending CPW Supervisor Approval"}),(0,n.jsxs)("div",{className:"card-actions",children:[(0,n.jsxs)("button",{className:"action-btn secondary",children:[n.jsx("span",{className:"icon",children:"filter_list"}),"Filter"]}),(0,n.jsxs)("button",{className:"action-btn primary",onClick:p,children:[n.jsx("span",{className:"icon",children:"refresh"}),"Refresh"]})]})]}),(0,n.jsxs)("div",{className:"card-content",children:[o&&(0,n.jsxs)("div",{className:"error-message",children:[n.jsx("span",{className:"icon",children:"error"}),o]}),a.length>0?n.jsx("div",{className:"table-container",children:(0,n.jsxs)("table",{className:"data-table",children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{children:[n.jsx("th",{children:"Case Name"}),n.jsx("th",{children:"Intake Date"}),n.jsx("th",{children:"Key Allegations"}),n.jsx("th",{children:"Children Involved"}),n.jsx("th",{children:"Risk Level"}),n.jsx("th",{children:"Indicators"}),n.jsx("th",{children:"Days Pending"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:a.map(e=>(0,n.jsxs)("tr",{children:[n.jsx("td",{children:(0,n.jsxs)("div",{className:"case-name-cell",children:[n.jsx(t.default,{href:`/cases/${e.case_id}`,className:"case-link",children:n.jsx("strong",{children:e.case_display_name||e.family_name})}),n.jsx("div",{className:"case-number",children:e.case_number})]})}),n.jsx("td",{children:new Date(e.created_date).toLocaleDateString()}),n.jsx("td",{children:(0,n.jsxs)("div",{className:"allegation-cell",children:[n.jsx("span",{className:"allegation-type",children:e.allegation_type}),n.jsx("div",{className:"allegation-desc",children:e.allegation_description})]})}),n.jsx("td",{children:n.jsx("div",{className:"children-list",children:x(e)||"No children listed"})}),n.jsx("td",{children:n.jsx("span",{className:`risk-badge ${e.risk_level?.toLowerCase().replace(" ","-")}`,children:e.risk_level||"Not Set"})}),n.jsx("td",{children:(0,n.jsxs)("div",{className:"indicators-cell",children:[j(e).slice(0,2).map((e,s)=>(0,n.jsxs)("span",{className:`indicator-badge ${u(e)}`,title:e,children:[n.jsx("span",{className:"icon",children:m(e)}),e]},s)),j(e).length>2&&(0,n.jsxs)("span",{className:"indicator-more",children:["+",j(e).length-2," more"]})]})}),n.jsx("td",{children:n.jsx("span",{className:"days-pending",children:v(e)})}),n.jsx("td",{children:(0,n.jsxs)("div",{className:"action-buttons",children:[(0,n.jsxs)("button",{className:"action-btn small success",children:[n.jsx("span",{className:"icon",children:"check"}),"Approve"]}),(0,n.jsxs)("button",{className:"action-btn small warning",children:[n.jsx("span",{className:"icon",children:"close"}),"Reject"]}),(0,n.jsxs)(t.default,{href:`/cases/${e.case_id}`,className:"action-btn small secondary",children:[n.jsx("span",{className:"icon",children:"visibility"}),"Review"]})]})})]},e.case_id))})]})}):(0,n.jsxs)("div",{className:"empty-state",children:[n.jsx("span",{className:"icon large",children:"check_circle"}),n.jsx("h3",{children:"No Cases Pending Approval"}),n.jsx("p",{children:"All cases have been reviewed and approved"})]})]})]}),"approved"===e&&(0,n.jsxs)("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h2",{children:"Cases Approved Today"})}),n.jsx("div",{className:"card-content",children:(0,n.jsxs)("div",{className:"empty-state",children:[n.jsx("span",{className:"icon large",children:"check_circle"}),n.jsx("h3",{children:"No Cases Approved Today"}),n.jsx("p",{children:"No cases have been approved today"})]})})]}),"team"===e&&(0,n.jsxs)("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h2",{children:"Team Workload Overview"})}),n.jsx("div",{className:"card-content",children:(0,n.jsxs)("div",{className:"workload-grid",children:[(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[n.jsx("h3",{children:"Jennifer Smith"}),n.jsx("span",{className:"worker-role",children:"CPW"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"12"}),n.jsx("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"3"}),n.jsx("span",{className:"stat-label",children:"Pending Review"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"2"}),n.jsx("span",{className:"stat-label",children:"Overdue"})]})]})]}),(0,n.jsxs)("div",{className:"workload-card",children:[(0,n.jsxs)("div",{className:"workload-header",children:[n.jsx("h3",{children:"Mark Johnson"}),n.jsx("span",{className:"worker-role",children:"CPW"})]}),(0,n.jsxs)("div",{className:"workload-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"8"}),n.jsx("span",{className:"stat-label",children:"Active Cases"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"1"}),n.jsx("span",{className:"stat-label",children:"Pending Review"})]}),(0,n.jsxs)("div",{className:"stat",children:[n.jsx("span",{className:"stat-number",children:"0"}),n.jsx("span",{className:"stat-label",children:"Overdue"})]})]})]})]})})]})]})]})]})}},6824:(e,s,a)=>{"use strict";a.d(s,{$4:()=>o,BY:()=>t,Ey:()=>m,Kj:()=>h,TZ:()=>p,k4:()=>l,r$:()=>d,tW:()=>c,xL:()=>i});class n{constructor(e="https://ccwis-core-case-mgmt-807576987550.us-central1.run.app"){this.baseUrl=e}async request(e,s={}){try{let a=`${this.baseUrl}${e}`,n=await fetch(a,{headers:{"Content-Type":"application/json",...s.headers},...s});if(!n.ok)return{error:(await n.json().catch(()=>({}))).error||`HTTP ${n.status}: ${n.statusText}`};return{data:await n.json()}}catch(e){return{error:e instanceof Error?e.message:"Unknown error occurred"}}}async getCasesPendingAssignment(){return this.request("/swcm/cases/pending-assignment")}async assignCaseToSWCM(e,s,a){return this.request(`/swcm/cases/${e}/assign`,{method:"POST",body:JSON.stringify({assigned_worker:s,assigned_supervisor:a})})}async getCasesByWorker(e){return this.request(`/cases?assigned_worker=${encodeURIComponent(e)}`)}async getCaseById(e){return this.request(`/cases/${e}`)}async getPersonsByCase(e){return this.request(`/cases/${e}/persons`)}async getCaseNotes(e){return this.request(`/cases/${e}/notes`)}async addCaseNote(e,s,a){return this.request(`/cases/${e}/notes`,{method:"POST",body:JSON.stringify({note_text:s,note_type:a||"General"})})}async updateCase(e,s){return this.request(`/cases/${e}`,{method:"PUT",body:JSON.stringify(s)})}async searchPersons(e){return this.request(`/persons/search?q=${encodeURIComponent(e)}`)}async getPersonById(e){return this.request(`/persons/${e}`)}async healthCheck(){return this.request("/health")}}let r=new n,t=()=>r.getCasesPendingAssignment(),i=(e,s,a)=>r.assignCaseToSWCM(e,s,a),c=e=>r.getCasesByWorker(e),l=e=>r.getCaseById(e),d=(e,s,a)=>r.addCaseNote(e,s,a),o=(e,s)=>r.updateCase(e,s),h=e=>r.searchPersons(e),p=e=>r.getPersonById(e),m=async e=>(await new Promise(e=>setTimeout(e,400)),!e||e.length<2)?{data:{incidents:[]},error:void 0}:{data:{incidents:[{incident_number:"INC-2024-001234",child_first_names:"Emma",child_last_names:"Johnson",parent_first_names:"Michael, Sarah",parent_last_names:"Johnson, Johnson",cps_worker:"Dana Wilson",due_date:"2024-09-15",county_of_assessment:"King County",intake_date:"2024-08-15",reported_native_american_heritage:"No",perpetrators:"Michael Johnson",perpetrator_first_name:"Michael",perpetrator_last_name:"Johnson",findings:"Substantiated",allegations:"Physical abuse",victims:"Emma Johnson",victim_first_name:"Emma",victim_last_name:"Johnson",person_id:"12345",role:"Client",gender:"Female",age_calculated:8,prior_workers:"None",current_address:"123 Main St",address_type:"Residential",residence_county:"King County",date_of_birth:"2016-03-12",phone_number:"206-555-0123",phone_type:"Home",address:"123 Main St",city:"Seattle",state:"WA",zip_code:98101,non_custodial_parent:!1,non_custodial_parent_person_id:"",non_custodial_parent_first_name:"",non_custodial_parent_last_name:"",non_custodial_parent_middle_name:"",non_custodial_parent_dob:"",non_custodial_parent_ssn:"",non_custodial_parent_suffix:"",non_custodial_parent_sex:"",non_custodial_parent_race:"",non_custodial_parent_ethnicity:"",legal_custodian:"Sarah Johnson",guardian:"",prior_assessment:"None",type_of_appointment:"",clinic_name:"",appointment_date:""}].filter(s=>s.incident_number.toLowerCase().includes(e.toLowerCase())||s.child_first_names.toLowerCase().includes(e.toLowerCase())||s.child_last_names.toLowerCase().includes(e.toLowerCase())||s.allegations.toLowerCase().includes(e.toLowerCase()))},error:void 0}},434:(e,s,a)=>{"use strict";a.d(s,{default:()=>r.a});var n=a(9404),r=a.n(n)},9368:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});let n=(0,a(8570).createProxy)(String.raw`/home/gabbyburke/cw-prototype/app/cpw-supervisor/page.tsx#default`)},1506:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i,metadata:()=>t});var n=a(9510),r=a(7371);a(7272);let t={title:"VISION - Child Welfare Information System",description:"VISION - Comprehensive Child Welfare Information System for state agencies"};function i({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{children:(0,n.jsxs)("div",{className:"app-layout",children:[(0,n.jsxs)("aside",{className:"sidebar",children:[(0,n.jsxs)("div",{className:"sidebar-header",children:[n.jsx("h1",{className:"sidebar-brand",children:"VISION"}),n.jsx("p",{className:"sidebar-subtitle",children:"Child Welfare System"})]}),n.jsx("nav",{className:"sidebar-nav",children:(0,n.jsxs)("div",{className:"nav-section",children:[n.jsx("div",{className:"nav-section-header",children:n.jsx("span",{className:"section-label",children:"User Personas"})}),(0,n.jsxs)("ul",{className:"nav-list",children:[n.jsx("li",{children:(0,n.jsxs)(r.default,{href:"/cpw",className:"nav-link",children:[n.jsx("span",{className:"icon",children:"fact_check"}),n.jsx("span",{children:"CPW"})]})}),n.jsx("li",{children:(0,n.jsxs)(r.default,{href:"/cpw-supervisor",className:"nav-link",children:[n.jsx("span",{className:"icon",children:"approval"}),n.jsx("span",{children:"CPW Supervisor"})]})}),n.jsx("li",{children:(0,n.jsxs)(r.default,{href:"/swcm-supervisor",className:"nav-link",children:[n.jsx("span",{className:"icon",children:"supervisor_account"}),n.jsx("span",{children:"SWCM Supervisor"})]})}),n.jsx("li",{children:(0,n.jsxs)(r.default,{href:"/",className:"nav-link",children:[n.jsx("span",{className:"icon",children:"dashboard"}),n.jsx("span",{children:"SWCM"})]})})]})]})})]}),(0,n.jsxs)("div",{className:"main-layout",children:[n.jsx("header",{className:"top-header",children:(0,n.jsxs)("div",{className:"header-content",children:[n.jsx("div",{className:"header-spacer"}),(0,n.jsxs)("div",{className:"header-actions",children:[n.jsx("button",{className:"action-btn secondary",children:n.jsx("span",{className:"icon",children:"notifications"})}),n.jsx("button",{className:"action-btn secondary",children:n.jsx("span",{className:"icon",children:"settings"})}),n.jsx("button",{className:"action-btn secondary",children:n.jsx("span",{className:"icon",children:"person"})})]})]})}),n.jsx("main",{className:"main-content",children:e})]})]})})})}},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),n=s.X(0,[991],()=>a(882));module.exports=n})();